:root{ --bg:#0f172a; --panel:#0b1224cc; --accent:#22d3ee; --text:#e5e7eb; --muted:#94a3b8; }
html,body{height:100%;margin:0;background:radial-gradient(1200px 800px at 70% 20%, #0b1229, #0a1023 40%, #0a0f20 70%, #090e1c); color:var(--text); font-family:system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;}
.app{display:grid; grid-template-rows:auto 1fr auto; height:100%;}
header{display:flex; gap:.75rem; align-items:center; padding:.75rem 1rem; background:linear-gradient(180deg, #0e162d, #0d1429 50%, transparent); border-bottom:1px solid #1f2937}
header h1{font-size:1.05rem;margin:0;font-weight:700; letter-spacing:.2px;}
header .badge{font-size:.75rem; color:#0e2930; background:#67e8f9; padding:.18rem .5rem; border-radius:.5rem; font-weight:700}
main{position:relative; overflow:hidden;}
video{position:absolute; inset:0; width:100%; height:100%; object-fit:cover; transform:scaleX(-1); filter:saturate(.9) contrast(1.05) brightness(.95);}
.video-hidden{display:none !important}
canvas#draw{position:absolute; inset:0; width:100%; height:100%; touch-action:none;}
canvas#ui{position:absolute; inset:0; pointer-events:none;}
.toolbar{position:absolute; left:1rem; top:1rem; z-index:12; display:flex; flex-direction:column; gap:.5rem; padding:.6rem; background:var(--panel); border:1px solid #1f2937; border-radius:14px; backdrop-filter: blur(6px); box-shadow:0 10px 30px #0006;}
.row{display:flex; gap:.4rem; align-items:center;}
.btn{width:40px; height:40px; display:grid; place-items:center; border-radius:10px; border:1px solid #1f2937; background:#0b1224; color:#cbd5e1; cursor:default; box-shadow:inset 0 0 0 1px #00000040;}
.btn.active{outline:2px solid var(--accent); color:white; background:#082231;}
.btn svg{width:22px; height:22px; opacity:.95}
.swatch{width:26px; height:26px; border-radius:50%; border:2px solid #0b0f1a; box-shadow:0 0 0 1px #0006 inset;}
.legend{position:absolute; right:1rem; top:1rem; z-index:12; max-width:min(42ch, 42%); background:var(--panel); border:1px solid #1f2937; border-radius:14px; padding:.75rem .9rem; font-size:.9rem; line-height:1.35; box-shadow:0 10px 30px #0006; backdrop-filter: blur(6px);}
.legend b{color:#e2e8f0}
.kbd{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; background:#0b0f1a; border:1px solid #1f2937; border-radius:6px; padding:.08rem .35rem}
footer{display:flex; justify-content:space-between; align-items:center; gap:.75rem; padding:.6rem 1rem; color:var(--muted); font-size:.85rem; background:linear-gradient(0deg, #0e162d, #0d1429 50%, transparent); border-top:1px solid #1f2937;}
.capsule{display:inline-flex; align-items:center; gap:.35rem; border:1px dashed #334155; border-radius:999px; padding:.25rem .6rem;}
.ok { color:#86efac; } .warn { color:#facc15; } .err { color:#fda4af; }
.ghost{position:absolute; z-index:11; pointer-events:none; border-radius:999px; border:2px dashed var(--accent); opacity:.85; transform: translate(-50%, -50%);} 
.overlay{position:absolute; inset:0; z-index:20; display:none; align-items:center; justify-content:center; background:#020617cc; backdrop-filter: blur(6px);} 
.overlay .card{max-width:680px; background:#0b1224; border:1px solid #1f2937; border-radius:16px; padding:1rem 1.2rem; box-shadow:0 20px 50px #0009;}
.overlay h2{margin:.2rem 0 .5rem 0; font-size:1.2rem}
.overlay ul{margin:.35rem 0 .6rem 1.1rem; padding:0}
.overlay li{margin:.25rem 0}
.overlay .actions{display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem}
.btn-lg{padding:.55rem .85rem; border-radius:10px; border:1px solid #1f2937; background:#082231; color:#e5e7eb; cursor:default}
.btn-ghost{background:#0b1224;}
details.diags{position:absolute; left:1rem; bottom:1rem; z-index:12; background:var(--panel); border:1px solid #1f2937; border-radius:12px; padding:.4rem .7rem;}
details.diags summary{cursor:default}
